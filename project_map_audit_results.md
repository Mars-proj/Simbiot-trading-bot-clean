# Project Map: Audit Results

This file contains the results of the audit of the trading bot system's modules, including Core Trading Logic, Supporting Modules, and Additional Modules. Each entry includes the module name, its usage status, recommendations, useful settings (if any), and remarks.

## Audit Results
- **2025-03-28**: Module `json_handler.py` is used in the system (dependency from `trade_executor_core.py`). Recommended to keep. No useful settings, but `dumps` and `loads` functions are critical for data serialization. Remark: Dependency graph listed `json_handler -> logging_setup`, but this dependency was not found in code. Removed dependency 2025-03-28.
- **2025-03-28**: Module `config_keys.py` is used in the system (dependencies from `start_trading_all.py`, `bot_user_data.py`). Recommended to keep. Useful settings: `API_KEYS` (stores API keys for users), `PREFERRED_EXCHANGES` (preferred exchanges for users), `SUPPORTED_EXCHANGES` (list of supported exchanges: `['mexc', 'binance', 'bybit', 'kucoin', 'okx']`).
- **2025-03-28**: Remark: Dependency graph (`trading_bot_graph.dot`) was missing `config_keys.py -> logging_setup.py`, although `validate_api_keys` uses `logger_main`. Added dependency to graph 2025-03-28.
- **2025-03-29**: Module `bot_translations.py` removed as Telegram bot is not integrated into the current system. Useful settings (translations) preserved below. Recommendation: Restore module upon Telegram bot integration.
- **2025-03-29**: Module `config_notifications.py` removed as notifications are not used in the current system. Useful settings preserved below. Recommendation: Restore module upon notification integration.
- **2025-03-29**: Module `trade_blacklist.py` removed as its functionality is duplicated by `signal_blacklist.py`. Useful settings preserved below. Recommendation: Use `signal_blacklist.py` for symbol filtering.
- **2025-03-29**: Module `trade_executor_core.py` is used in the system (dependency from `bot_trading.py`). Recommended to keep. Recommendations: 1) Add input validation (`signal`, `amount`, `leverage`) [Done: 2025-03-30]; 2) Improve logging (add `amount`, `price`) [Done: 2025-03-30]; 3) Add error handling for `fetch_ticker` [Done: 2025-03-30]; 4) Add support for other order types (market orders) [Done: 2025-03-30]; 5) Add test mode for real trading [Done: 2025-03-30]; 6) Remove placeholders for `amount`, `leverage`, `order_type` [Done: 2025-03-30]; 7) Integrate `exit_points_calculator.py` [Done: 2025-03-31]; 8) Integrate `monetization.py` [Done: 2025-03-31]; 9) Integrate `partial_close_calculator.py` [Done: 2025-03-31]; 10) Integrate `risk_manager.py` [Done: 2025-03-31]; 11) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 12) Integrate `notification_manager.py` for trade notifications [Done: 2025-04-01]; 13) Add price validation for `fetch_ticker` [Done: 2025-04-01].
- **2025-03-29**: Module `bot_trading.py` is used in the system (dependency from `start_trading_all.py`). Recommended to keep. Recommendations: 1) Integrate `trade_executor_signals.py` for real signal generation [Done: 2025-03-30]; 2) Add input validation (`user_id`, `symbol`) [Done: 2025-03-30]; 3) Improve logging (add signal and trade parameters) [Done: 2025-03-30]; 4) Add test mode for real trading [Done: 2025-03-30]; 5) Remove `leverage` placeholder, add configurable trade percentage and RSI thresholds [Done: 2025-03-30]; 6) Integrate `deposit_calculator.py` and `signal_blacklist.py` [Done: 2025-03-31]; 7) Add API key validation via `bot_user_data.py` [Done: 2025-03-31]; 8) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 9) Add signal validation [Done: 2025-04-01].
- **2025-03-29**: Module `start_trading_all.py` is used in the system. Recommended to keep. Recommendations: 1) Add input validation (`user_id`, `symbols`) [Done: 2025-03-30]; 2) Improve logging (add results per symbol) [Done: 2025-03-30]; 3) Improve error handling in `asyncio.gather` [Done: 2025-03-30]; 4) Add test mode for real trading [Done: 2025-03-30]; 5) Remove `amount` and `leverage` placeholders, add configurable parameters [Done: 2025-03-30]; 6) Integrate `deposit_calculator.py` and `signal_blacklist.py` [Done: 2025-03-31]; 7) Add API key validation via `bot_user_data.py` [Done: 2025-03-31]; 8) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 9) Improve logging for trade results [Done: 2025-04-01].
- **2025-03-29**: Module `deposit_manager.py` is not used in the current system but may be useful. Recommended to keep. Recommendations: 1) Improve logging (add currency and total balance info) [Done: 2025-03-30]; 2) Add balance check and exchange integration [Done: 2025-03-31]; 3) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 4) Replace placeholder with API call for deposit [Done: 2025-04-01].
- **2025-03-29**: Module `exchange_utils.py` is used in the system (dependency from `market_rentgen_core.py`). Recommended to keep. Recommendations: 1) Improve logging (add returned data: `bid`, `ask`) [Done: 2025-03-30]; 2) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01].
- **2025-03-29**: Module `order_utils.py` is used in the system. Recommended to keep. Recommendations: 1) Add support for market orders via `order_type` parameter [Done: 2025-03-30]; 2) Improve logging (add `order_id`) [Done: 2025-03-30]; 3) Add support for additional order parameters [Done: 2025-03-31]; 4) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 5) Add order cancellation support [Done: 2025-04-01].
- **2025-03-29**: Module `async_exchange_fetcher.py` removed as its functionality is duplicated by `exchange_utils.py` and `ohlcv_fetcher.py`. Recommendation: Use `exchange_utils.py` for fetching exchange data.
- **2025-03-29**: Module `async_exchange_manager.py` removed as its functionality is duplicated by `exchange_factory.py`. Recommendation: Use `exchange_factory.py` for creating exchange instances.
- **2025-03-29**: Module `async_order_fetcher.py` removed as its functionality can be transferred to `order_utils.py`. Recommendation: Add `fetch_open_orders` function to `order_utils.py`.
- **2025-03-29**: Module `async_ticker_fetcher.py` removed as its functionality is duplicated by `exchange_utils.py`. Recommendation: Use `fetch_ticker` from `exchange_utils.py`.
- **2025-03-29**: Module `async_ohlcv_fetcher.py` removed as its functionality is duplicated by `ohlcv_fetcher.py`. Recommendation: Use `fetch_ohlcv` from `ohlcv_fetcher.py`.
- **2025-03-29**: General improvements for modules working with API keys (`check_all_trades.py`, `deposit_manager.py`, `exchange_factory.py`): 1) Add API key validation via `validate_api_keys` [Done: 2025-03-30].
- **2025-03-29**: General improvements for modules working with exchange objects (`exchange_utils.py`, `order_utils.py`): 1) Add input validation (`exchange` must be a `ccxt.async_support` object) [Done: 2025-03-30].
- **2025-03-29**: General improvements for module `check_all_trades.py`: 1) Improve logging (add trade types: buy/sell) [Done: 2025-03-30]; 2) Remove placeholder for trade fetching, integrate `trade_pool_core.py` [Done: 2025-03-31]; 3) Add symbol validation via `symbol_handler.py` [Done: 2025-04-01]; 4) Add status filtering [Done: 2025-04-01].
- **2025-03-29**: General improvements for module `exchange_factory.py`: 1) Improve logging (add configuration info) [Done: 2025-03-30]; 2) Add support for additional configuration parameters [Done: 2025-03-30].
- **2025-03-29**: General improvements for modules `check_all_trades.py` and `deposit_manager.py`: 1) Add symbol validation via `load_markets` [Done: 2025-03-30].
- **2025-03-29**: General improvements for modules `trade_executor_core.py`, `bot_trading.py`, `start_trading_all.py`: 1) Integrate `limits.py` for risk management [Done: 2025-03-30].
- **2025-03-30**: Module `api_server.py`: Added API key authentication and rate limiting [Done: 2025-03-30]; Made API keys and rate limit configurable, improved rate limiting with time window [Done: 2025-03-31].
- **2025-03-30**: Module `cache_utils.py`: Added check for problematic symbols before caching [Done: 2025-03-30]; Made volume threshold and cache TTL configurable [Done: 2025-03-31]; Added cache cleanup method [Done: 2025-04-01].
- **2025-03-30**: Module `trade_pool_core.py`: Added check for problematic symbols in cache [Done: 2025-03-30]; Made volume threshold configurable, removed unused `storage_method` [Done: 2025-03-30]; Added symbol validation via `symbol_handler.py`, replaced direct `fetch_ticker` with `exchange_utils.py`, added `clear_trades` method [Done: 2025-04-01]; Added auto-cleanup of outdated trades [Done: 2025-04-01].
- **2025-03-30**: Module `bot_trading.py`: Added test mode for real trading [Done: 2025-03-30]; Removed `leverage` placeholder, added configurable trade percentage and RSI thresholds [Done: 2025-03-30]; Added signal validation [Done: 2025-04-01].
- **2025-03-30**: Module `trade_executor_core.py`: Added test mode for real trading [Done: 2025-03-30]; Removed placeholders for `amount`, `leverage`, `order_type` [Done: 2025-03-30]; Added price validation [Done: 2025-04-01].
- **2025-03-30**: Module `start_trading_all.py`: Added test mode for real trading [Done: 2025-03-30]; Removed `amount` and `leverage` placeholders, added configurable parameters [Done: 2025-03-30]; Improved logging [Done: 2025-04-01].
- **2025-03-30**: Module `signal_generator_indicators.py`: Added GPU support with cupy for indicator calculations [Done: 2025-03-30]; Added CPU fallback [Done: 2025-03-30].
- **2025-03-30**: Module `local_model_api.py`: Added GPU support with torch for model inference [Done: 2025-03-30]; Removed mock model placeholder, integrated into `trade_executor_signals.py` [Done: 2025-03-31].
- **2025-03-30**: Module `retraining_manager.py`: Fixed issue with data loading, added error handling [Done: 2025-03-30]; Added scheduled retraining [Done: 2025-04-01].
- **2025-03-30**: Module `exchange_factory.py`: Added rate limit monitoring for MEXC [Done: 2025-03-30].
- **2025-03-30**: Module `signal_generator_core.py`: Made overbought/oversold thresholds configurable [Done: 2025-03-30].
- **2025-03-30**: Module `strategies.py`: Improved strategy recommendation with moving averages, made periods configurable [Done: 2025-03-30].
- **2025-03-31**: Module `signal_blacklist.py`: Made blacklist configurable, integrated into `bot_trading.py` and `start_trading_all.py` [Done: 2025-03-31].
- **2025-03-31**: Module `bot_user_data.py`: Made user data configurable, added API key validation, integrated into `bot_trading.py` and `start_trading_all.py` [Done: 2025-03-31]; Added Redis persistence [Done: 2025-04-01].
- **2025-03-31**: Module `redis_client.py`: Made Redis URL configurable, added automatic initialization [Done: 2025-03-31].
- **2025-03-31**: Module `backtest_cycle.py`: Added configurable parameters for `run_trading_bot`, still requires historical data fetching [Done: 2025-03-31]; Integrated `historical_data_fetcher.py` for historical data fetching [Done: 2025-04-01]; Added result saving [Done: 2025-04-01].
- **2025-03-31**: Module `deposit_manager.py`: Added balance check via `balance_manager.py`, integrated `exchange_factory.py`, still requires API call for deposit [Done: 2025-03-31]; Replaced placeholder with API call [Done: 2025-04-01].
- **2025-04-01**: Module `symbol_handler.py`: Replaced static validation with dynamic check via `exchange_factory.py`, added symbol activity check [Done: 2025-04-01]; Added volume check [Done: 2025-04-01].
- **2025-04-01**: Module `symbol_trade_processor.py`: Added trade processing with loss threshold, integrated `trade_pool_core.py` and `trade_executor_core.py`, added symbol validation via `symbol_handler.py` [Done: 2025-04-01].
- **2025-04-01**: Module `test_symbols.py`: Replaced static list with dynamic fetching from exchange, added symbol validation via `symbol_handler.py` [Done: 2025-04-01]; Added volume filtering [Done: 2025-04-01].
- **2025-04-01**: Module `token_analyzer.py`: Added volume and volatility analysis, integrated `exchange_utils.py` and `ohlcv_fetcher.py`, added symbol validation via `symbol_handler.py` [Done: 2025-04-01].
- **2025-04-01**: Module `trade_pool_manager.py`: Added trade pool management with cleanup of outdated trades, integrated `trade_pool_core.py`, added input validation [Done: 2025-04-01]; Added scheduled cleanup [Done: 2025-04-01].
- **2025-04-01**: Module `historical_data_fetcher.py`: Added to fetch historical OHLCV data for backtesting, integrated into `backtest_cycle.py` [Done: 2025-04-01]; Added pagination [Done: 2025-04-01].
- **2025-04-01**: Module `notification_manager.py`: Added to manage email notifications, integrated into `trade_executor_core.py` for trade notifications [Done: 2025-04-01].
- **2025-04-01**: Module `ohlcv_fetcher.py`: Added pagination support [Done: 2025-04-01].
- **2025-04-01**: Module `order_utils.py`: Added order cancellation support [Done: 2025-04-01].
- **2025-04-01**: Module `position_monitor.py`: Added automatic closing of positions on stop-loss/take-profit [Done: 2025-04-01].
- **2025-04-01**: Module `retraining_manager.py`: Added scheduled retraining [Done: 2025-04-01].
- **2025-04-01**: Module `ml_model_trainer.py`: Added saving of training metrics [Done: 2025-04-01].
- **2025-04-01**: Module `ml_predictor.py`: Added batch prediction support [Done: 2025-04-01].
- **2025-04-01**: Module `symbol_data_fetcher.py`: Added caching support via `cache_utils.py` [Done: 2025-04-01].
- **2025-04-01**: Module `main.py`: Added as the main entry point for the system, launches trading, trade pool cleanup, position monitoring, and model retraining [Done: 2025-04-01].

## Useful Settings from Removed Modules
- **bot_translations.py** (removed 2025-03-29):
